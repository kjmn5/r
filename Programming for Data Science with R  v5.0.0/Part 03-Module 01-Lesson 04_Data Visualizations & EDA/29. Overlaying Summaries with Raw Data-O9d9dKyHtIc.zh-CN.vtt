WEBVTT
Kind: captions
Language: zh-CN

00:00:00.380 --> 00:00:03.230
ggplot 允许我们轻松创建数据的各种汇总

00:00:03.230 --> 00:00:06.180
并进行绘图 这特别适用于

00:00:06.180 --> 00:00:09.810
进行快速探索以及合并原始数据的图形

00:00:09.810 --> 00:00:13.900
就像我们的显示摘要的原始散点图

00:00:13.900 --> 00:00:16.490
这幅图是显示摘要的图形之一 

00:00:16.490 --> 00:00:18.920
我希望能够将其显示在

00:00:18.920 --> 00:00:22.570
friend_count 与年龄关系的原始图形上

00:00:22.570 --> 00:00:25.810
我们再来看看第一个原始的散点图 由于所有的点都是黑色

00:00:25.810 --> 00:00:27.960
我要改变这些点的颜色

00:00:27.960 --> 00:00:30.730
这样当汇总重叠时 还能方便地看见

00:00:30.730 --> 00:00:34.016
我要把这里变成橙色 现在这就是我的散点图

00:00:34.016 --> 00:00:36.980
我要叠加以前得到的汇总

00:00:36.980 --> 00:00:40.258
我要将这个放到这个上面

00:00:40.258 --> 00:00:44.540
可以将 geom_line 添加到图形中来实现

00:00:44.540 --> 00:00:47.590
这里 我将传递参数 stat 并设置它等于汇总

00:00:47.590 --> 00:00:51.010
并将其给 y 的一个函数 fun.y 参数可用于

00:00:51.010 --> 00:00:53.090
任何函数类型 这样我们可以将其应用

00:00:53.090 --> 00:00:55.520
至 y 值 在这个例子中 我要取平均值

00:00:55.520 --> 00:00:58.530
就这样 这是我的汇总线

00:00:58.530 --> 00:01:01.800
为按年龄的平均好友数 覆盖于我的原始数据

00:01:01.800 --> 00:01:05.825
或者我的散点图 这幅图立即显示出非常年轻用户的

00:01:05.825 --> 00:01:09.460
friend_count 的增长以及其后出现的下降

00:01:09.460 --> 00:01:12.480
我们甚至可以向图中添加更多细节

00:01:12.480 --> 00:01:16.290
方法是同时显示多个汇总 尽管绘出这种条件平均的图形

00:01:16.290 --> 00:01:20.150
我们无法立即看出围绕平均值的离散程度

00:01:20.150 --> 00:01:22.800
例如 中位数 friend_counts

00:01:22.800 --> 00:01:25.440
是否适用于这个区域内的 30 岁年龄 

00:01:25.440 --> 00:01:28.280
是否一直扩展到 2000？当然我们可以看出

00:01:28.280 --> 00:01:31.290
大多数用户 即使是年轻用户 都没有超过2000 个好友 

00:01:31.290 --> 00:01:34.970
我们可以通过绘制数据的分位数 

00:01:34.970 --> 00:01:38.030
帮助自己理解 friend_counts 的这种条件分布

00:01:38.030 --> 00:01:41.916
我们来使用 10%、50% 或者中位数以及

00:01:41.916 --> 00:01:46.520
90% 分位数 我们开始时向图形中添加 10% 分位数汇总线

00:01:46.520 --> 00:01:50.060
再添加 geom_line 将其传递给

00:01:50.060 --> 00:01:52.570
汇总统计 然后用于函数

00:01:52.570 --> 00:01:55.320
我打算将其传递给分位数而不是平均值 我需要设置概率

00:01:55.320 --> 00:01:59.145
等于 1/10 或者 0.1 这个代码在图形中生成

00:01:59.145 --> 00:02:02.170
10% 分位数 现在我希望它显示不同于平均值

00:02:02.170 --> 00:02:04.550
所以我打算添加一些细节

00:02:04.550 --> 00:02:07.050
为其着色进行加重 我将线型表

00:02:07.050 --> 00:02:08.860
设置为二进行加重 设置颜色

00:02:08.860 --> 00:02:13.114
等于蓝色 现在好很多了

00:02:13.114 --> 00:02:16.029
现在要添加 90% 分位数 只需要在这里将概率从

00:02:16.029 --> 00:02:19.130
0.1 更改为 0.9 所以我打算添加另一条线

00:02:19.130 --> 00:02:22.660
我将与以前一样使用相同的参数

00:02:22.660 --> 00:02:26.080
然后只是改变概率 这里我们可以看出

00:02:26.080 --> 00:02:29.090
90% 用户的好友数低于这条线 我最后要做的是

00:02:29.090 --> 00:02:32.670
加入 50% 标记 这是中位数

00:02:32.670 --> 00:02:36.310
我不会将这个 geom_line 加重 但将会把颜色变成蓝色

00:02:36.310 --> 00:02:38.950
现在看这个图形 我希望你尝试

00:02:38.950 --> 00:02:42.890
在 R 中创建同样的图形 尝试添加一个 coord_cartesian 图层

00:02:42.890 --> 00:02:44.490
放大这幅图的不同部分

00:02:44.490 --> 00:02:46.600
如需帮助 可查阅 coord_cartesian 的文档

00:02:46.600 --> 00:02:49.870
一定要确保自己理解所有这些代码

00:02:49.870 --> 00:02:52.600
我知道这里内容很多

00:02:52.600 --> 00:02:55.420
一旦你对此图有深刻的了解 你将能探索得更深入

00:02:55.420 --> 00:02:58.140
观察下这幅图 你注意到了什么？

