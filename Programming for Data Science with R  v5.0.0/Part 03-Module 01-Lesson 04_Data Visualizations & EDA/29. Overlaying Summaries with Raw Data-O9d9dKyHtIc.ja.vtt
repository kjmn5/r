WEBVTT
Kind: captions
Language: ja

00:00:00.380 --> 00:00:04.560
ggplotではsummaryの作成と作図が簡単にできます

00:00:04.560 --> 00:00:07.540
これは特にデータの素早い調査や

00:00:07.540 --> 00:00:13.240
集計結果と散布図の表示など
生データの複数のプロットの結びつけに役立ちます

00:00:13.240 --> 00:00:16.490
この図が友達数対年齢の元の図の上に

00:00:16.490 --> 00:00:18.920
表示したいsummaryです

00:00:18.920 --> 00:00:22.570
それでは再度元の散布図を見ていきましょう

00:00:22.570 --> 00:00:25.810
これらの点はすべて黒なので

00:00:25.810 --> 00:00:27.200
この色を変えます

00:00:27.200 --> 00:00:30.730
そうするとsummaryを重ねた時に見やすくなります

00:00:30.730 --> 00:00:34.016
色をオレンジにしたら できた散布図を

00:00:34.016 --> 00:00:36.980
前に作成したsummaryと重ねます

00:00:36.980 --> 00:00:40.000
これをこの上に重ねたいのです

00:00:40.000 --> 00:00:43.040
それにはgeom＿lineを加えます

00:00:43.040 --> 00:00:47.000
statパラメータを＝‘summary’とし

00:00:47.590 --> 00:00:50.360
yに関数を加えます　fun．yパラメータは

00:00:50.360 --> 00:00:53.900
yの値にどんな関数も当てはまるようにします

00:00:53.900 --> 00:00:55.960
この場合は平均値を見ます

00:00:55.960 --> 00:01:00.040
これです
このサマリ線は生データつまり散布図に対する

00:01:00.040 --> 00:01:02.960
年齢ごとの友達数の平均値を示しています

00:01:02.960 --> 00:01:06.300
この図ではとても若いユーザの友達数の増加と

00:01:06.300 --> 00:01:09.460
その後に続く減少を即座に確認できます

00:01:09.460 --> 00:01:12.480
同時にいくつものサマリを表示することで

00:01:12.480 --> 00:01:15.640
この図をさらに詳しく見ることができます

00:01:15.640 --> 00:01:20.640
ただ条件付平均値を出しても
平均値の散布の様子はすぐ確認できません

00:01:20.640 --> 00:01:22.800
例えば30歳の友達数中央値は

00:01:22.800 --> 00:01:25.440
この部分の中央値なのか

00:01:25.440 --> 00:01:27.280
2，000まで及んでいるかなどです

00:01:27.280 --> 00:01:32.720
若いユーザも含め大抵のユーザに
2，000人以上友達がいないことは分かります

00:01:32.720 --> 00:01:34.970
データの分位値を作図することで

00:01:34.970 --> 00:01:38.030
この条件つき分布を理解しやすくなります

00:01:38.030 --> 00:01:43.200
10％、50％もしくは
中央値と90％の分位値を使ってみましょう

00:01:43.200 --> 00:01:47.220
まずこの図に10％の分位値のサマリラインを入れます

00:01:47.220 --> 00:01:50.060
それにはもう1つgeom＿lineを加え

00:01:50.060 --> 00:01:52.570
stat＝‘summary’とつなぎ

00:01:52.570 --> 00:01:55.320
関数は平均値でなく分位値を使います

00:01:55.320 --> 00:01:58.180
そして確率を1／10か0．1に設定します

00:01:58.180 --> 00:02:01.100
このコードで図に10％の分位値が出ます

00:02:01.100 --> 00:02:06.020
平均値と違う表示にするため
色と破線にする詳細を加えます

00:02:06.020 --> 00:02:08.860
線タイプの表を2に設定して破線にし

00:02:08.860 --> 00:02:12.560
色を青に設定します　かなりよくなりましたね

00:02:12.560 --> 00:02:16.029
90％分位値を足していくにはこの確率を

00:02:16.029 --> 00:02:20.060
0．1から0．9に変更するだけです
ではもう1本線を足します

00:02:20.060 --> 00:02:23.480
同じパラメータを使い確率のみを変えます

00:02:23.480 --> 00:02:26.080
これでユーザの90％の友達数が

00:02:26.080 --> 00:02:28.380
この線の下だと分かります

00:02:28.380 --> 00:02:31.600
最後に50％つまり中央値を足します

00:02:31.600 --> 00:02:35.580
この線は破線にしませんが色を青にしていきます

00:02:35.580 --> 00:02:37.640
なかなかよい図ですね

00:02:37.640 --> 00:02:42.000
ではこれと同じ図をRで作成し
グラフの各部分をクローズアップする

00:02:42.000 --> 00:02:44.490
coord＿cartesianレイヤを足してください

00:02:44.490 --> 00:02:47.200
助けが必要ならcoord＿cartesianの説明を見て

00:02:47.200 --> 00:02:49.870
このコードをすべて理解してください

00:02:49.870 --> 00:02:52.600
確かにコードはたくさんありますが

00:02:52.600 --> 00:02:55.420
図からアイデアを得て少し調べてから

00:02:55.420 --> 00:02:58.140
図をよく見てください　何に気づきますか

